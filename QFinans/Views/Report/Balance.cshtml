@model IEnumerable<QFinans.Models.DailyTansactionReportSumViewModel>

@{
    ViewBag.Title = "DailyTransactionReport";

    var data = Model.GroupBy(x => new { x.Year, x.Month }).Select(g => new
    {
        year = g.Key.Year,
        month = g.Key.Month,
        date = new DateTime(g.Key.Year, g.Key.Month, 1),
        confirmDepositCount = g.Sum(x => x.ConfirmDepositCount),
        confirmDepositSum = g.Sum(x => x.ConfirmDepositSum),
        confirmDrawCount = g.Sum(x => x.ConfirmDrawCount),
        confirmDrawSum = g.Sum(x => x.ConfirmDrawSum)
    });

}

<div class="card">
    <div class="card-body">
        <h5 class="card-title">Bakiye Raporu</h5>
        <hr />

        <div class="table-responsive mt-3">
            <table class="table table-sm table-bordered table-hover table-dark text-white-50" id="reportTable3">
                <thead>
                    <tr>
                        <th>Tarih</th>
                        <th>Yatırım</th>
                        <th>Komisyon</th>
                        <th>Çekim</th>
                        <th>Bakiye</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td class="text-center">@(Convert.ToDateTime((item.Day + "." + item.Month + "." + item.Year)).ToShortDateString())</td>
                            <td class="text-right">@((item.ConfirmDepositSum + item.NewDepositSum).ToString("N2"))</td>
                            <td class="text-right">@(((item.ConfirmDepositSum + item.NewDepositSum) * ViewBag.BankCharge / 100).ToString("N2"))</td>
                            <td class="text-right">@item.ConfirmDrawSum.ToString("N2")</td>
                            <td class="text-right">@(((item.ConfirmDepositSum + item.NewDepositSum) - ((item.ConfirmDepositSum + item.NewDepositSum) * ViewBag.BankCharge / 100) - item.ConfirmDrawSum).ToString("N2"))</td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <th>Toplam</th>
                        <th class="text-right">@(((Model.Sum(x => x.ConfirmDepositSum)) + (Model.Sum(x => x.NewDepositSum))).ToString("N2"))</th>
                        <th class="text-right">@((((Model.Sum(x => x.ConfirmDepositSum)) + (Model.Sum(x => x.NewDepositSum))) * ViewBag.BankCharge / 100).ToString("N2"))</th>
                        <th class="text-right">@Model.Sum(x => x.ConfirmDrawSum).ToString("N2")</th>
                        <th class="text-right">@((((Model.Sum(x => x.ConfirmDepositSum)) + (Model.Sum(x => x.NewDepositSum))) - (((Model.Sum(x => x.ConfirmDepositSum)) + (Model.Sum(x => x.NewDepositSum))) * ViewBag.BankCharge / 100) - Model.Sum(x => x.ConfirmDrawSum)).ToString("N2"))</th>
                    </tr>
                </tfoot>
            </table>
        </div>

    </div>
</div>



